
/*
 * Create IAM user for Serverless framework to use to deploy the lambda function
 */
module "serverless-user" {
  source  = "silinternational/serverless-user/aws"
  version = "0.1.3"

  app_name   = var.app_name
  aws_region = var.aws_region
}

/*
 These S3 resources can be used to create the S3 results bucket. They are commented from the configuration to prevent
 accidental erasure. If used, the Terraform state can be disconnected from AWS using the following commands:

 $ terraform state rm aws_s3_bucket_public_access_block.results
 $ terraform state rm aws_s3_bucket.results
*/
#resource "aws_s3_bucket" "results" {
#  bucket = local.aws_s3_bucket_name
#
#  tags = {
#    Name     = local.aws_s3_bucket_name
#    app_name = var.app_name
#    app_env  = var.app_env
#  }
#}
#
#resource "aws_s3_bucket_public_access_block" "results" {
#  bucket = aws_s3_bucket.results.id
#
#  block_public_acls       = true
#  block_public_policy     = true
#  ignore_public_acls      = true
#  restrict_public_buckets = true
#}
